<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Content Manager</title>
    <link rel="icon" href="/assets/images/logo.png">
    <script>
      window.CMS_MANUAL_INIT = true;
    </script>
    <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
  </head>
  <body>
    <script>
      window.addEventListener('message', function(ev) {
        try {
          console.log('OAuth message received:', ev.origin, ev.data);
        } catch (e) {}
      });
    </script>
    <div id="ncms-app"></div>
    <script>
      (function() {
        function initCMS() {
          if (window.CMS && typeof window.CMS.init === 'function') {
            window.CMS.init({ configPath: '/admin/config.yml' });
          } else {
            console.error('Decap CMS failed to load');
          }
        }
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', initCMS);
        } else {
          initCMS();
        }
      })();
    </script>
  </body>
</html>
